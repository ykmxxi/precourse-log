# 좋은 단위 테스트의 4대 요소(4장)

- 회귀 방지: 테스트가 얼마나 버그(회귀)의 존재를 잘 나타내는지
  - 회귀: 소프트웨어 버그, 수정 후 기능이 의도한 대로 작동하지 않는 경우
  - 테스트 중 실행되는 코드의 양: 테스트 메서드가 많다고 무조건 좋은 것이 아님, 테스트 메서드를 위해 필요한 메서드가 많은 경우
  - 적더라도 중요한 것은 중요한 코드를 모두 테스트하고 있는지
- 리팩터링 내성: 거짓 양성을 내지 않고 리팩터링을 유지할 수 있는지
  - 거짓 양성: 테스트가 실패 했지만 기능이 의도한 대로 동작한 경우
  - 디버깅을 통해 거짓 양성을 줄인다
  - 거짓 양성을 줄이려면 테스트 대상이 만든 결과를 검증해야 한다. 과정(행위)을 검증하거나 협력자를 통해 검증하는 것은 좋지 않다
- 빠른 피드백: 테스트는 빨리 실행되어야 한다
- 유지 보수성
  - 테스트 메서드가 짧을 수록 읽기 쉽다
  - 외부 의존성이 적을수록 쉽게 운영 가능하다
- 블랙박스 테스트를 활용한다. 내부 구조를 몰라도 기능을 검사할 수 있어야 한다

# 단위 테스트 스타일 (6장)

- 상태 기반 테스트: 작업 완료 후 시스템 상태를 확인, 메서드가 변경한 상태를 확인한다 -> void 메서드 테스트
- 출력 기반 테스트: 테스트 대상에게 입력을 주고(필요한 데이터), 출력을 확인(결과 값) -> 반환 타입이 있는 메서드 테스트, 작고 간결, 리팩터링 내성이 좋음

# 가치 있는 단위 테스트를 위한 리팩터링 (7장)

- 코드가 중요하거나 복잡할수록 협력자가 적어야 한다
- 도메인 테스트는 단위 테스트에 대한 노력 대비 가장 가치 있는 테스트다
- 컨트롤러 테스트는 통합 테스트를 통해 간단히 테스트해야 한다
- 간단한 코드는 테스트할 가치가 전혀 없다(복잡도가 낮고 도메인 유의성이 낮고, 협력자가 거의 없는 경우)

# 단위 테스트 안티 패턴(11장)

- 테스트 만을 위해 private을 외부로 노출시키는 것은(단위 테스트에 해당 메서드를 복사해와 사용, 테스트를 위한 접근 제어자 변경) 리팩터링 내성을 떨어뜨린다. 식별할 수 있는 동작으로 간접적으로 테스트해라
- 만약 그래도 테스트하고 싶다면 public로 분리하라는 신호다
- 비공개 메서드가 너무 복잡해 공개된 메서드로 테스트할 수 없다면 추상화가 누락됐다는 뜻이다. public로 바꾸지 말고 해당 추상화를 별도 클래스로 추출하라 -> 클래스 분리
- 도메인 지식이 외부에 유출되지 않게 블랙박스 관점에서 테스트하라
- 테스트에만 필요한 코드를 프로덕션 코드에 만들지 말라

